var aphsjq=jQuery;(function(v){var d=function(){};d.isEmpty=function(m){return 0==m.replace(/^\s+|\s+$/g,"").length};d.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};d.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};d.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};v.APHSUtils=d})(window);
(function(v){jQuery(document).ready(function(d){function m(a){a?n.find("img.aphs-inline").attr("src",b.inlinePauseIcon):n.find("img.aphs-inline").attr("src",b.inlinePlayIcon)}function t(a,e){-1!=a.indexOf("ebsfma")&&(a=atob(a.substr(6)));void 0==e.attr("data-start")||APHSUtils.isEmpty(e.attr("data-start"))?b.startTime&&(a+="#t="+Number(b.startTime)):a+="#t="+e.attr("data-start");void 0==e.attr("data-end")||APHSUtils.isEmpty(e.attr("data-end"))?b.endTime&&(a+=","+Number(b.endTime)):a+=","+e.attr("data-end");
return a}var k=JSON.parse(window.aphs_player_options),r;for(r in k)"volume"!=r&&"0"==k[r]&&(k[r]=!1);var b=d.extend(!0,{},{muted:!0,preload:"metadata",rewindOnHover:!1,unmuteOnUserInteraction:!0,playbackMethod:"hover",playbackLinkTrigger:".aphs-link",toggleTrigger:"[data-hover-sound]",allowMultipleSoundsAtOnce:!1},k);k=APHSUtils.isMobile()?"hover":b.playbackMethod;console.log(b);APHSUtils.isIOS();APHSUtils.isAndroid();var q=this;d("body");d(window);var f=d(document),w=d(document.createElement("audio")).attr("preload",
b.preload),l=w[0],p,n,g;if(b.muted&&b.unmuteOnUserInteraction)f.on("mousedown.apaphs, keydown.apaphs",function(){f.off("mousedown.apaphs, keydown.apaphs");console.log("userInteractionHappened")});this.togglePlayback=function(){if(l)if(l.paused){var a=l.play();void 0!==a&&a.then(function(){})["catch"](function(e){})}else l.pause()};this.inputAudio=function(a){w.off().on("ended",function(){}).on("play",function(){m(!0)}).on("pause",function(){m()}).on("loadedmetadata",function(){b.playbackRate&&(l.playbackRate=
Number(b.playbackRate))}).on("error",function(e){console.log("APHS sound error: "+e)});l.src=a;a=l.play();void 0!==a&&a.then(function(){})["catch"](function(e){})};"click"==k?(f.on("click",b.playbackLinkTrigger,function(a){a=d(this).attr("href");p&&p==a?q.togglePlayback():(p=a,n&&m(!1),n=d(this),q.inputAudio(a));return!1}),f.on("click",b.toggleTrigger,function(){var a=d(this);b.allowMultipleSoundsAtOnce||!g||g.is(a)||(g.find(".aphs-pause").hide(),g.find(".aphs-play").show(),g.data("isPaused","0"),
g.hasClass("aphs-speech-aid")&&g.find(".aphs-video").css("display","none"),g.data("aphs-audio").pause());if(!a.data("aphs-audio")){var e=t(a.attr("data-hover-sound"),a);if(a.hasClass("aphs-speech-aid")){var c='<video class="aphs-video" preload="'+b.preload+'" muted playsinline controlsList="nofullscreen nodownload noremoteplayback"';b.loop&&(c+=" loop");b.useControls&&(c+=" controls");a.append(d(c+'><source src="'+(e+'" /></video>')));c=a.find(".aphs-video");var h=c[0]}else c=d(document.createElement("audio")).attr("preload",
b.preload),b.loop&&c.attr("loop","loop"),h=c[0],h.src=e;a.data("aphs-audio",h);a.data("isPaused",0);if(!b.loop)c.on("ended",function(){a.find(".aphs-pause").hide();a.find(".aphs-play").show();a.data("isPaused","0")})}if("0"==a.data("isPaused")){a.find(".aphs-pause").show();a.find(".aphs-play").hide();a.data("isPaused","1");if(a.hasClass("aphs-speech-aid")){var u=a.find(".aphs-video").css("display","block");setTimeout(function(){u.addClass("aphs-visible")},20)}h=a.data("aphs-audio");b.rewindOnHover&&
(h.currentTime=0);b.playbackRate&&(h.playbackRate=Number(b.playbackRate));e=h.play();void 0!==e&&e.then(function(){})["catch"](function(x){console.log(x)})}else a.find(".aphs-pause").hide(),a.find(".aphs-play").show(),a.data("isPaused","0"),a.hasClass("aphs-speech-aid")&&a.find(".aphs-video").css("display","none"),a.data("aphs-audio").pause();g=a;return!1})):"hover"==k&&(f.on("mouseenter",b.playbackLinkTrigger,function(a){a=d(this).attr("href");p&&p==a?q.togglePlayback():(p=a,n&&m(!1),n=d(this),q.inputAudio(a))}).on("mouseleave",
b.playbackLinkTrigger,function(a){q.togglePlayback()}),f.on("mouseenter",b.toggleTrigger,function(a){a=d(a.currentTarget);if(!a.data("aphs-audio")){var e=t(a.attr("data-hover-sound"),a);if(a.hasClass("aphs-speech-aid")){var c='<video class="aphs-video" preload="'+b.preload+'" muted playsinline controlsList="nofullscreen nodownload noremoteplayback"';b.loop&&(c+=" loop");b.useControls&&(c+=" controls");a.append(d(c+'><source src="'+(e+'" /></video>')));c=a.find(".aphs-video")[0];a.data("aphs-audio",
c)}else c=d(document.createElement("audio")).attr("preload",b.preload),b.loop&&c.attr("loop","loop"),c=c[0],a.data("aphs-audio",c),c.src=e;a.data("isPaused",0)}if("0"==a.data("isPaused")){a.find(".aphs-pause").show();a.find(".aphs-play").hide();a.data("isPaused","1");if(a.hasClass("aphs-speech-aid")){var h=a.find(".aphs-video").css("display","block");setTimeout(function(){h.addClass("aphs-visible")},20)}c=a.data("aphs-audio");b.rewindOnHover&&(c.currentTime=0);b.playbackRate&&(c.playbackRate=Number(b.playbackRate));
a=c.play();void 0!==a&&a.then(function(){})["catch"](function(u){console.log(u)})}}).on("mouseleave",b.toggleTrigger,function(a){a=d(a.currentTarget);a.hasClass("aphs-speech-aid")&&a.find(".aphs-video").css("display","none");a.find(".aphs-pause").hide();a.find(".aphs-play").show();a.data("isPaused","0");a.data("aphs-audio").pause()}));(function(){f.find(".aphs-sound").each(function(){var a=d(this);if(a.attr("data-id")&&a.attr("data-hover-sound")){var e=a.attr("data-id"),c=t(a.attr("data-hover-sound"),
a);"#"==e.charAt(0)&&(e=e.substr(1));f.find("#"+e).attr("data-hover-sound",c)}a.remove()});f.find(b.playbackLinkTrigger).each(function(){d(this).prepend('<img class="aphs-inline" src="'+b.inlinePlayIcon+'" alt=""/>')})})()})})(jQuery);